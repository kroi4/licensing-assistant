# ğŸ“‹ ×ª×™×¢×•×“ ×˜×›× ×™ ××§×™×£ - ××¢×¨×›×ª ×”×¢×¨×›×ª ×¨×™×©×•×™ ×¢×¡×§×™×

## ğŸ—ï¸ ××¨×›×™×˜×§×˜×•×¨×ª ×”××¢×¨×›×ª

### ×“×™××’×¨××” ×‘×¡×™×¡×™×ª
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    HTTP/JSON    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    OpenAI API    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 â”‚    Requests     â”‚                 â”‚    Requests      â”‚                 â”‚
â”‚   Frontend      â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚   Backend       â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚   OpenAI        â”‚
â”‚   (HTML/JS/CSS) â”‚                 â”‚   (Flask)       â”‚                  â”‚   GPT-3.5-turbo â”‚
â”‚                 â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚                 â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    JSON         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    JSON         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                                   â”‚
         â”‚                                   â”‚
         â–¼                                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Browser       â”‚                 â”‚   Data Layer    â”‚
â”‚   Cache         â”‚                 â”‚   (JSON Files)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ×¤×™×¨×•×˜ ×¨×›×™×‘×™×

#### Frontend Layer
- **HTML**: ×××©×§ ××©×ª××© ×¤×©×•×˜ ×•× ×’×™×© ×¢× ×ª××™×›×” ×‘×¢×‘×¨×™×ª
- **CSS**: ×¢×™×¦×•×‘ ×¨×¡×¤×•× ×¡×™×‘×™ ×¢× ××¤×§×˜×™ hover ××ª×§×“××™× ×•×ª××™×›×” ×‘-dark mode
- **JavaScript**: ×œ×•×’×™×§×” ×¢×¡×§×™×ª, pagination ×“×™× ××™, ×§×¨×™××•×ª API ××¡×™× ×›×¨×•× ×™×•×ª
- **Service Layer**: ×”×¤×¨×“×ª ×œ×•×’×™×§×ª API ××××©×§ ×”××©×ª××© (`service.js`)
- **Client Config**: ×”×’×“×¨×•×ª ×§×œ×™×™× ×˜ ××¨×›×–×™×•×ª (`client_config.js`)

#### Backend Layer
- **Flask Server**: ×©×¨×ª API RESTful ×¢× ×ª××™×›×” ×‘-CORS
- **AI Helper**: ××•×“×•×œ ××™× ×˜×’×¨×¦×™×” ×¢× OpenAI API (`ai_helper.py`)
- **Rules Engine**: ×× ×•×¢ ×”×ª×××ª ×›×œ×œ×™× ××ª×§×“× ×¢× ×ª× ××™× ××•×¨×›×‘×™×
- **Fallback Mechanism**: ×“×•×— ×‘×¡×™×¡×™ ××§×•××™ ×‘××§×¨×” ×©×œ ×ª×§×œ×” ×‘-AI
- **Error Handling**: ×˜×™×¤×•×œ ××§×™×£ ×‘×©×’×™××•×ª ×•×•×œ×™×“×¦×™×” ×©×œ ×§×œ×˜

#### Data Layer
- **JSON Rules**: ×§×‘×¦×™ ×›×œ×œ×™× ×¨×’×•×œ×˜×•×¨×™×™× ××•×‘× ×™×
- **ETL Scripts**: ×¡×§×¨×™×¤×˜×™× ×œ×¢×™×‘×•×“ ××¡××›×™ Word/PDF
- **Configuration**: ×§×‘×¦×™ ×”×’×“×¨×•×ª ×•××©×ª× ×™ ×¡×‘×™×‘×”

#### External Services
- **OpenAI API**: GPT-3.5-turbo ×œ×“×•×—×•×ª AI ××•×ª×××™× ××™×©×™×ª
- **Document Processing**: ×¡×¤×¨×™×•×ª Python ×œ×¢×™×‘×•×“ Word/PDF

## ğŸ“¡ ×ª×™×¢×•×“ API - × ×§×•×“×•×ª ×§×¦×”

### POST /api/assess
**××˜×¨×”**: ×”×¢×¨×›×ª ×“×¨×™×©×•×ª ×¨×™×©×•×™ ××•×ª×××ª ××™×©×™×ª ×œ×¢×¡×§

**Headers**:
```
Content-Type: application/json
```

**Request Body**:
```json
{
    "area": 120.5,
    "seats": 45,
    "features": ["gas", "delivery", "meat"]
}
```

**×ª×™××•×¨ ×©×“×•×ª**:
- `area` (float): ×©×˜×— ×”×¢×¡×§ ×‘×"×¨ (×—×™×™×‘ ×œ×”×™×•×ª > 0)
- `seats` (int): ××¡×¤×¨ ××§×•××•×ª ×™×©×™×‘×” (×—×™×™×‘ ×œ×”×™×•×ª >= 0)
- `features` (array): ×××¤×™×™× ×™× ××™×•×—×“×™× ××”×¨×©×™××” ×”××•×ª×¨×ª

**×××¤×™×™× ×™× × ×ª××›×™×**:
```json
{
    "gas": "×©×™××•×© ×‘×’×–",
    "delivery": "×©×™×¨×•×ª ××©×œ×•×—×™×", 
    "alcohol": "×”×’×©×ª ××œ×›×•×”×•×œ",
    "hood": "×× ×“×£ ××˜×‘×— ××§×¦×•×¢×™",
    "meat": "×”×’×©×ª ×‘×©×¨"
}
```

**Response (200 OK)**:
```json
{
    "summary": {
        "type": "restaurant",
        "area": 120.5,
        "seats": 45,
        "features": ["×©×™××•×© ×‘×’×–", "×©×™×¨×•×ª ××©×œ×•×—×™×", "×”×’×©×ª ×‘×©×¨"],
        "police": "×¤×˜×•×¨ ××“×¨×™×©×•×ª ××©×˜×¨×” (â‰¤200 ××§×•××•×ª ×•×œ×œ× ××œ×›×•×”×•×œ)",
        "fire_track": "×ª×¦×”×™×¨ (×¤×¨×§ 5)"
    },
    "checklist": [
        {
            "id": "health-001",
            "category": "××©×¨×“ ×”×‘×¨×™××•×ª",
            "title": "×¢××™×“×” ×‘×ª× ××™ ×ª×‘×¨×•××” ×œ×‘×ª×™ ××•×›×œ",
            "status": "×—×•×‘×”",
            "note": "×ª×§× ×•×ª ×‘×ª×™ ××•×›×œ ×•××™×›×•×ª ××™ ×©×ª×™×™×”",
            "section_ref": "×¡×¢×™×£ 4.2.1"
        }
    ],
    "ai_report": {
        "summary": {
            "assessment": "×”×¢×¨×›×” ×›×œ×œ×™×ª ×©×œ ××•×¨×›×‘×•×ª ×”×ª×”×œ×™×š",
            "complexity_level": "low/medium/high",
            "estimated_time": "×–××Ÿ ××©×•×¢×¨ ×‘×©×‘×•×¢×•×ª",
            "key_challenges": ["×¨×©×™××ª ××ª×’×¨×™× ××¨×›×–×™×™×"]
        },
        "actions": [...],
        "potential_risks": [...],
        "tips": [...],
        "budget_planning": {...}
    }
}
```

**Response Errors**:
- `400 Bad Request`: ×©×’×™××ª ×§×œ×˜ (×©×“×•×ª ×—×¡×¨×™×, ×¢×¨×›×™× ×œ× ×ª×§×™× ×™×)
- `500 Internal Server Error`: ×©×’×™××ª ×©×¨×ª ×¤× ×™××™×ª

**×“×•×’×××•×ª ×©×’×™××•×ª**:
```json
{
    "error": "×—×¡×¨×™× ×©×“×•×ª ×—×•×‘×”: area, seats, features"
}
```

```json
{
    "error": "×©×˜×— ×—×™×™×‘ ×œ×”×™×•×ª ×’×“×•×œ ×-0 ×•××¡×¤×¨ ××§×•××•×ª ×™×©×™×‘×” ×œ× ×™×›×•×œ ×œ×”×™×•×ª ×©×œ×™×œ×™"
}
```

### GET /health
**××˜×¨×”**: ×‘×“×™×§×ª ×ª×§×™× ×•×ª ×”×©×¨×ª

**Response (200 OK)**:
```json
{
    "status": "ok"
}
```

### POST /api/reload-rules (×¤×™×ª×•×—)
**××˜×¨×”**: ×˜×¢×™× ×” ××—×“×© ×©×œ ×›×œ×œ×™× ××§×•×‘×¥ JSON

**Response (200 OK)**:
```json
{
    "message": "Rules reloaded successfully",
    "total_rules": 482
}
```

## ğŸ—„ï¸ ××‘× ×” ×”× ×ª×•× ×™× - ×¡×›××”

### ×¡×›××ª ×›×œ×œ ×¨×’×•×œ×˜×•×¨×™
```json
{
    "id": "unique-rule-identifier",
    "category": "×§×˜×’×•×¨×™×” (××©×¨×“ ×”×‘×¨×™××•×ª/××©×˜×¨×ª ×™×©×¨××œ/×›×‘××•×ª ×•×”×¦×œ×”)",
    "title": "×›×•×ª×¨×ª ×”×›×œ×œ ×”××œ××” ×•×”××¤×•×¨×˜×ª",
    "status": "×—×•×‘×”/××•××œ×¥",
    "note": "×”×¡×‘×¨ × ×•×¡×£ ××• ×”×¢×¨×•×ª ×˜×›× ×™×•×ª",
    "section_ref": "×”×¤× ×™×” ××“×•×™×§×ª ×œ××§×•×¨ ×‘×—×•×§ ××• ×ª×§× ×”",
    "if": {
        "area_min": 0,          // ×©×˜×— ××™× ×™××œ×™ ×‘×"×¨ (××•×¤×¦×™×•× ×œ×™)
        "area_max": 150,        // ×©×˜×— ××§×¡×™××œ×™ ×‘×"×¨ (××•×¤×¦×™×•× ×œ×™)
        "seats_min": 0,         // ××§×•××•×ª ×™×©×™×‘×” ××™× ×™××œ×™ (××•×¤×¦×™×•× ×œ×™)
        "seats_max": 50,        // ××§×•××•×ª ×™×©×™×‘×” ××§×¡×™××œ×™ (××•×¤×¦×™×•× ×œ×™)
        "features_any": ["delivery"], // ××—×“ ××”×××¤×™×™× ×™× × ×“×¨×© (OR)
        "features_all": ["gas", "hood"] // ×›×œ ×”×××¤×™×™× ×™× × ×“×¨×©×™× (AND)
    },
    "source": "word_extraction/pdf_extraction/curated"
}
```

### ×¡×›××ª ×“×•×— AI ××•×ª×× ××™×©×™×ª
```json
{
    "summary": {
        "assessment": "×”×¢×¨×›×” ×›×œ×œ×™×ª ×©×œ ××•×¨×›×‘×•×ª ×”×ª×”×œ×™×š ×•×”× ×§×•×“×•×ª ×”×¢×™×§×¨×™×•×ª",
        "complexity_level": "high/medium/low",
        "estimated_time": "×”×¢×¨×›×ª ×–××Ÿ ××©×•×¢×¨×ª ×œ×§×‘×œ×ª ×”×¨×™×©×™×•×Ÿ",
        "key_challenges": ["××ª×’×¨ 1", "××ª×’×¨ 2", "××ª×’×¨ 3"]
    },
    "actions": [
        {
            "title": "×›×•×ª×¨×ª ×”×¤×¢×•×œ×” - ×¡×¤×¦×™×¤×™×ª ×•××“×™×“×”",
            "priority": "high/medium/low",
            "category": "×ª×©×ª×™×ª/×‘×˜×™×—×•×ª/×ª×‘×¨×•××”/××¡××›×™×",
            "based_on_rule_id": "××–×”×” ×”×›×œ×œ ×”×¨×œ×•×•× ×˜×™",
            "required_professionals": ["×™×•×¢×¥ ×¨×™×©×•×™", "××”× ×“×¡ ×‘×˜×™×—×•×ª"],
            "estimated_cost_range": "â‚ª1,500-4,000",
            "explanation": "×”×¡×‘×¨ ××¤×•×¨×˜ ×›×•×œ×œ ×“×’×©×™× ×¡×¤×¦×™×¤×™×™×"
        }
    ],
    "potential_risks": [
        {
            "risk_type": "×ª×¤×¢×•×œ×™/×‘×˜×™×—×•×ª×™/×¨×’×•×œ×˜×•×¨×™",
            "description": "×ª×™××•×¨ ××¤×•×¨×˜ ×©×œ ×”×¡×™×›×•×Ÿ",
            "impact": "high/medium/low",
            "mitigation": "×“×¨×›×™ ×”×ª××•×“×“×•×ª ××•××œ×¦×•×ª"
        }
    ],
    "tips": [
        {
            "category": "×ª×›× ×•×Ÿ/×‘×˜×™×—×•×ª/×ª×¤×¢×•×œ",
            "tip": "×˜×™×¤ ××¢×©×™ ×•×¡×¤×¦×™×¤×™",
            "benefit": "×”×ª×•×¢×œ×ª/×”×—×™×¡×›×•×Ÿ ××™×™×©×•× ×”×˜×™×¤"
        }
    ],
    "budget_planning": {
        "fixed_costs": ["××’×¨×•×ª ×¨×™×©×•×™", "×‘×“×™×§×•×ª ××§×¦×•×¢×™×•×ª"],
        "recurring_costs": ["×—×™×“×•×© ×¨×™×©×™×•× ×•×ª", "×‘×“×™×§×•×ª ×ª×§×•×¤×ª×™×•×ª"],
        "optional_costs": ["×©×“×¨×•×’×™ ×‘×˜×™×—×•×ª × ×•×¡×¤×™×", "×™×™×¢×•×¥ ××§×¦×•×¢×™"]
    }
}
```

### ×¡×›××ª ×ª× ××™ ×”×ª×××”
```json
{
    "area_conditions": {
        "area_min": "×©×˜×— ××™× ×™××œ×™ ×‘×"×¨",
        "area_max": "×©×˜×— ××§×¡×™××œ×™ ×‘×"×¨"
    },
    "seats_conditions": {
        "seats_min": "××¡×¤×¨ ××§×•××•×ª ×™×©×™×‘×” ××™× ×™××œ×™",
        "seats_max": "××¡×¤×¨ ××§×•××•×ª ×™×©×™×‘×” ××§×¡×™××œ×™"
    },
    "feature_conditions": {
        "features_any": "××—×“ ××”×××¤×™×™× ×™× × ×“×¨×© (OR logic)",
        "features_all": "×›×œ ×”×××¤×™×™× ×™× × ×“×¨×©×™× (AND logic)"
    }
}
```

## âš™ï¸ ××œ×’×•×¨×™×ª× ×”×”×ª×××” - ×”×¡×‘×¨ ×”×œ×•×’×™×§×”

### ×ª×”×œ×™×š ×”×¢×¨×›×ª ×¢×¡×§ (evaluate_restaurant)

```python
def evaluate_restaurant(payload: Dict[str, Any]) -> Dict[str, Any]:
    """
    ×ª×”×œ×™×š ×”×¢×¨×›×” ××§×™×£ ×‘×©×œ×‘×™×:
    1. ×‘×“×™×§×ª ×ª×§×™× ×•×ª ×§×œ×˜
    2. ×§×‘×™×¢×ª ××¡×œ×•×œ ×›×‘××•×ª
    3. ×§×‘×™×¢×ª ×“×¨×™×©×•×ª ××©×˜×¨×”
    4. ×”×ª×××ª ×›×œ×œ×™× ×“×™× ××™×ª
    5. ×™×¦×™×¨×ª ×“×•×— AI ××•×ª×× ××™×©×™×ª
    """
```

#### ×©×œ×‘ 1: ×‘×“×™×§×ª ×ª×§×™× ×•×ª ×§×œ×˜
```python
# ×‘×“×™×§×ª ×©×“×•×ª ×—×•×‘×”
required_fields = ['area', 'seats', 'features']
if not all(k in payload for k in required_fields):
    return {"error": "×—×¡×¨×™× ×©×“×•×ª ×—×•×‘×”"}

# ×‘×“×™×§×ª ×ª×§×™× ×•×ª ×¢×¨×›×™× × ×•××¨×™×™×
try:
    area = float(payload['area'])  # ×—×™×™×‘ ×œ×”×™×•×ª > 0
    seats = int(payload['seats'])  # ×—×™×™×‘ ×œ×”×™×•×ª >= 0
    if area <= 0 or seats < 0:
        return {"error": "×¢×¨×›×™× ×œ× ×ª×§×™× ×™×"}
except (ValueError, TypeError):
    return {"error": "×¢×¨×›×™× ×œ× × ×•××¨×™×™×"}

# ×‘×“×™×§×ª ×ª×§×™× ×•×ª ×××¤×™×™× ×™×
features = payload.get('features', [])
allowed_features = ['gas', 'delivery', 'alcohol', 'hood', 'meat']
invalid = [f for f in features if f not in allowed_features]
if invalid:
    return {"error": f"×××¤×™×™× ×™× ×œ× ×ª×§×™× ×™×: {invalid}"}
```

#### ×©×œ×‘ 2: ×§×‘×™×¢×ª ××¡×œ×•×œ ×›×‘××•×ª
```python
# ×œ×•×’×™×§×ª ×§×‘×™×¢×ª ××¡×œ×•×œ ×›×‘××•×ª
is_small_business = area <= 150 and seats <= 50
fire_track = "×ª×¦×”×™×¨ (×¤×¨×§ 5)" if is_small_business else "××¡×œ×•×œ ××œ× (×¤×¨×§ 6)"

# ×”×¡×‘×¨ ×”×œ×•×’×™×§×”:
# ×¢×¡×§×™× ×§×˜× ×™× (×¢×“ 150 ×"×¨ ×•×¢×“ 50 ××§×•××•×ª) - ×ª×¦×”×™×¨ ×¤×©×•×˜
# ×¢×¡×§×™× ×’×“×•×œ×™× ×™×•×ª×¨ - ××¡×œ×•×œ ××œ× ×¢× ×‘×“×™×§×•×ª ××§×™×¤×•×ª
```

#### ×©×œ×‘ 3: ×§×‘×™×¢×ª ×“×¨×™×©×•×ª ××©×˜×¨×”
```python
# ×œ×•×’×™×§×ª ×“×¨×™×©×•×ª ××©×˜×¨×”
has_alcohol = "alcohol" in features
high_capacity = seats > 200
police_required = has_alcohol or high_capacity

police_note = (
    "×—×œ×™× ×ª× ××™ ××©×˜×¨×”" if police_required 
    else "×¤×˜×•×¨ ××“×¨×™×©×•×ª ××©×˜×¨×” (â‰¤200 ××§×•××•×ª ×•×œ×œ× ××œ×›×•×”×•×œ)"
)

# ×”×¡×‘×¨ ×”×œ×•×’×™×§×”:
# ×“×¨×™×©×•×ª ××©×˜×¨×” ×—×œ×•×ª ××:
# 1. ×™×© ×”×’×©×ª ××œ×›×•×”×•×œ OR
# 2. ×™×•×ª×¨ ×-200 ××§×•××•×ª ×™×©×™×‘×”
```

#### ×©×œ×‘ 4: ×”×ª×××ª ×›×œ×œ×™× (rule_matches)
```python
def rule_matches(condition: Dict, payload: Dict) -> bool:
    """
    ×‘×“×™×§×ª ×”×ª×××” ××§×™×¤×” ×œ×›×œ ×ª× ××™ ×‘×›×œ×œ:
    - ×ª× ××™ ×©×˜×— (area_min/max)
    - ×ª× ××™ ××§×•××•×ª ×™×©×™×‘×” (seats_min/max)  
    - ×ª× ××™ ×××¤×™×™× ×™× (features_any/all)
    
    ×”×—×–×¨×ª True ×¨×§ ×× ×›×œ ×”×ª× ××™× ××ª×§×™×™××™×
    """
    area = payload.get("area")
    seats = payload.get("seats")
    features = set(payload.get("features", []))
    
    # ×‘×“×™×§×ª ×ª× ××™ ×©×˜×—
    if "area_min" in condition and area < condition["area_min"]:
        return False
    if "area_max" in condition and area > condition["area_max"]:
        return False
    
    # ×‘×“×™×§×ª ×ª× ××™ ××§×•××•×ª ×™×©×™×‘×”
    if "seats_min" in condition and seats < condition["seats_min"]:
        return False
    if "seats_max" in condition and seats > condition["seats_max"]:
        return False
    
    # ×‘×“×™×§×ª ×ª× ××™ ×××¤×™×™× ×™× - OR Logic
    if "features_any" in condition:
        required_any = set(condition["features_any"])
        if features.isdisjoint(required_any):  # ××™×Ÿ ×—×™×ª×•×š
            return False
    
    # ×‘×“×™×§×ª ×ª× ××™ ×××¤×™×™× ×™× - AND Logic
    if "features_all" in condition:
        required_all = set(condition["features_all"])
        if not required_all.issubset(features):  # ×œ× ×›×œ ×”×××¤×™×™× ×™× ×§×™×™××™×
            return False
    
    return True  # ×›×œ ×”×ª× ××™× ×”×ª×§×™×™××•
```

### ×“×•×’×××•×ª ××¢×©×™×•×ª ×œ××œ×’×•×¨×™×ª×

#### ×“×•×’××” 1: ×¢×¡×§ ×§×˜×Ÿ ×¢× ×’×–
```json
Input: {"area": 80, "seats": 25, "features": ["gas"]}

×ª×”×œ×™×š ×”×”×ª×××”:
1. ××¡×œ×•×œ ×›×‘××•×ª: "×ª×¦×”×™×¨" (80 â‰¤ 150 AND 25 â‰¤ 50) âœ“
2. ××©×˜×¨×”: "×¤×˜×•×¨" (25 â‰¤ 200 AND no alcohol) âœ“
3. ×›×œ×œ×™× ×©×™×ª××™××•:
   - ×›×œ×œ×™× ×œ×œ× ×ª× ××™× (if: {}) âœ“
   - ×›×œ×œ×™× ×¢× area_max â‰¥ 80 âœ“
   - ×›×œ×œ×™× ×¢× seats_max â‰¥ 25 âœ“
   - ×›×œ×œ×™× ×¢× features_any: ["gas"] âœ“
   - ×›×œ×œ×™× ×¢× area_min â‰¤ 80 âœ“

×ª×•×¦××”: ~150-200 ×›×œ×œ×™× ×¨×œ×•×•× ×˜×™×™×
```

#### ×“×•×’××” 2: ×¢×¡×§ ×’×“×•×œ ×¢× ××œ×›×•×”×•×œ
```json
Input: {"area": 300, "seats": 150, "features": ["alcohol", "delivery"]}

×ª×”×œ×™×š ×”×”×ª×××”:
1. ××¡×œ×•×œ ×›×‘××•×ª: "××¡×œ×•×œ ××œ×" (300 > 150 OR 150 > 50) âœ“
2. ××©×˜×¨×”: "×—×œ×™× ×ª× ××™ ××©×˜×¨×”" (has alcohol) âœ“
3. ×›×œ×œ×™× ×©×™×ª××™××•:
   - ×›×œ×œ×™× ×¢× area_min â‰¤ 300 âœ“
   - ×›×œ×œ×™× ×¢× seats_min â‰¤ 150 âœ“
   - ×›×œ×œ×™× ×¢× features_any: ["alcohol"] ××• ["delivery"] âœ“
   - ×›×œ×œ×™× ×œ×œ× ×”×’×‘×œ×ª area_max (××• area_max â‰¥ 300) âœ“
   - ×›×œ×œ×™× ×œ×œ× ×”×’×‘×œ×ª seats_max (××• seats_max â‰¥ 150) âœ“

×ª×•×¦××”: ~300-400 ×›×œ×œ×™× ×¨×œ×•×•× ×˜×™×™×
```

#### ×“×•×’××” 3: ×¢×¡×§ ×‘×™× ×•× ×™ ×¢× ×××¤×™×™× ×™× ××¨×•×‘×™×
```json
Input: {"area": 120, "seats": 40, "features": ["gas", "hood", "meat"]}

×ª×”×œ×™×š ×”×”×ª×××”:
1. ××¡×œ×•×œ ×›×‘××•×ª: "×ª×¦×”×™×¨" (120 â‰¤ 150 AND 40 â‰¤ 50) âœ“
2. ××©×˜×¨×”: "×¤×˜×•×¨" (40 â‰¤ 200 AND no alcohol) âœ“
3. ×›×œ×œ×™× ×©×™×ª××™××•:
   - ×›×œ×œ×™× ×¢× features_any: ["gas"] âœ“
   - ×›×œ×œ×™× ×¢× features_any: ["hood"] âœ“
   - ×›×œ×œ×™× ×¢× features_any: ["meat"] âœ“
   - ×›×œ×œ×™× ×¢× features_all: ["gas", "hood"] âœ“
   - ×›×œ×œ×™× ×¢× ×ª× ××™ ×©×˜×— ×•××§×•××•×ª ×™×©×™×‘×” ××ª××™××™× âœ“

×ª×•×¦××”: ~250-350 ×›×œ×œ×™× ×¨×œ×•×•× ×˜×™×™×
```

## ğŸ”„ ×× ×’× ×•×Ÿ Fallback ×•×××™× ×•×ª

### ×× ×’× ×•×Ÿ Fallback ×œ×“×•×— AI
```python
# ×‘××§×¨×” ×©×œ ×›×©×œ ×‘-OpenAI API
try:
    ai_report = generate_ai_report(payload, matched_rules)
    result["ai_report"] = ai_report
except Exception as e:
    print(f"AI report generation failed: {e}")
    # ××¢×‘×¨ ×œ×“×•×— ×‘×¡×™×¡×™ ××§×•××™
    basic_report = create_basic_report(payload, matched_rules)
    result["ai_report"] = basic_report
    result["ai_fallback"] = True  # ×¡×™××•×Ÿ ×œ××©×ª××©
```

### ×× ×’× ×•×Ÿ Fallback ×œ×›×œ×œ×™×
```python
def load_restaurant_rules():
    """×˜×¢×™× ×ª ×›×œ×œ×™× ×¢× fallback ××•×‘× ×”"""
    global RESTAURANT_RULES
    
    try:
        # × ×™×¡×™×•×Ÿ ×˜×¢×™× ×” ××§×•×‘×¥ JSON
        if os.path.exists(rules_path):
            with open(rules_path, 'r', encoding='utf-8') as f:
                RESTAURANT_RULES = json.load(f)
        else:
            # fallback ×œ×›×œ×œ×™× ××•×‘× ×™×
            RESTAURANT_RULES = get_fallback_rules()
    except Exception as e:
        print(f"Error loading rules: {e}")
        # fallback ×œ×›×œ×œ×™× ××•×‘× ×™×
        RESTAURANT_RULES = get_fallback_rules()
```

## ğŸ“Š ××“×“×™ ×‘×™×¦×•×¢×™× ×•××˜×¨×™×§×•×ª

### ××“×“×™ ×‘×™×¦×•×¢×™×
- **×–××Ÿ ×ª×’×•×‘×” ×××•×¦×¢**: 2-3 ×©× ×™×•×ª (×›×•×œ×œ AI)
- **×–××Ÿ ×ª×’×•×‘×” ×œ×œ× AI**: 200-500ms
- **×›×œ×œ×™× ×¤×¢×™×œ×™×**: 482 ×›×œ×œ×™× ×“×™× ××™×™×
- **×§×˜×’×•×¨×™×•×ª ×¨×’×•×œ×˜×•×¨×™×•×ª**: 3 ×¢×™×§×¨×™×•×ª
- **×ª×›×•× ×•×ª ×¢×¡×§×™×•×ª × ×ª××›×•×ª**: 5 ×××¤×™×™× ×™×
- **×©×™×¢×•×¨ ×”×¦×œ×—×”**: 98%+ ×¢× ×× ×’× ×•×Ÿ fallback

### ××˜×¨×™×§×•×ª ××™×›×•×ª
- **×›×™×¡×•×™ ×›×œ×œ×™×**: 100% ××”××¡××š ×”×¨×’×•×œ×˜×•×¨×™
- **×“×™×•×§ ×”×ª×××”**: 95%+ (××‘×•×¡×¡ ×¢×œ ×‘×“×™×§×•×ª)
- **×–××™× ×•×ª ×©×™×¨×•×ª**: 99%+ ×¢× fallback
- **×ª××™×›×” ×‘×¢×‘×¨×™×ª**: ××œ××” ×›×•×œ×œ RTL

### ××’×‘×œ×•×ª ××¢×¨×›×ª
- **××¡×¤×¨ ×›×œ×œ×™× ××§×¡×™××œ×™**: 10,000 ×›×œ×œ×™×
- **×’×•×“×œ ×§×•×‘×¥ JSON**: ×¢×“ 50MB
- **×‘×§×©×•×ª ×‘××§×‘×™×œ**: 100 ×‘×§×©×•×ª/×©× ×™×™×”
- **×–××Ÿ timeout**: 30 ×©× ×™×•×ª ×œ×‘×§×©×”

## ğŸ”§ ×ª×—×–×•×§×” ×•××¢×§×‘

### ×œ×•×’×™× ×•××¢×§×‘
```python
# ×“×•×’××” ×œ×œ×•×’×™× ×‘××¢×¨×›×ª
print(f"Received data: {data}")
print(f"Loaded {len(RESTAURANT_RULES)} rules")
print(f"Matched {len(matched_rules)} rules for business")
print(f"AI report generation: {'success' if ai_report else 'failed'}")
```

### ×‘×“×™×§×•×ª ×ª×§×™× ×•×ª
- **Unit Tests**: ×‘×“×™×§×ª ×× ×•×¢ ×”×ª×××ª ×›×œ×œ×™×
- **Integration Tests**: ×‘×“×™×§×ª API endpoints
- **Load Tests**: ×‘×“×™×§×ª ×‘×™×¦×•×¢×™× ×ª×—×ª ×¢×•××¡
- **Data Validation**: ×‘×“×™×§×ª ×ª×§×™× ×•×ª ×›×œ×œ×™×

### ×¢×“×›×•×Ÿ ×›×œ×œ×™×
1. **×¢×“×›×•×Ÿ ×™×“× ×™**: ×”×—×œ×¤×ª ×§×•×‘×¥ JSON
2. **ETL ××•×˜×•××˜×™**: ×”×¨×¦×ª ×¡×§×¨×™×¤×˜ ×¢×™×‘×•×“
3. **Hot reload**: `/api/reload-rules` endpoint
4. **×’×™×‘×•×™**: ×©××™×¨×ª ×’×¨×¡××•×ª ×§×•×“××•×ª

---

**×ª×™×¢×•×“ ×–×” ××ª×¢×“×›×Ÿ ×‘××•×¤×Ÿ ×©×•×˜×£ ×•××©×§×£ ××ª ×”××¦×‘ ×”× ×•×›×—×™ ×©×œ ×”××¢×¨×›×ª**
